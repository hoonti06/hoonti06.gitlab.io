---
layout    : wiki
title     : Garbage Collection
summary   : 
date      : 2022-03-21 23:03:19 +0900
updated   : 2022-03-21 23:46:03 +0900
tag       : 
public    : true
published : true
parent    : 
latex     : false
---
* TOC
{:toc}

## 1. 개념
Java에서는 **개발자가** 프로그램 코드로 **메모리를 명시적으로 해제하지 않기 때문에** 가비지 컬렉터(Garbage Collector)가 더 이상 필요 없는 (쓰레기) 객체를 찾아 지우는 작업 수행

<br>
## 2. GC의 두 가지 전제 조건

- 대부분의 객체는 금방 접근 불가능 상태(unreachable)가 된다.
- 오래된 객체에서 젊은 객체로의 참조는 아주 적게 존재한다.

<br>
## 3. 영역 구분

- Young 영역
  - 자바 객체의 대부분이 생성될 때 저장되는 공간(너무 커서 이 영역에 들어갈 수 없는 객체는 더 윗 세대(?)로 들어간다)
  - 시간이 지나 우선순위가 낮아지면 `Old` 영역으로 옮겨진다. 이 영역에서 객체가 사라질 때 `Minor GC`가 발생
  - 세부 영역
    - Eden 영역
    - Survivor 영역(2개)
- Old 영역
  - Young 영역에서 저장되었던 객체 중에 오래된 객체가 이동되어 저장되는 영역
  - 이 영역에서 객체가 사라질 때 `Major GC(Full GC)`가 발생


<br>
## 4. Minor GC 방식

- 세부 과정
  - 새로 생성한 대부분의 객체는 Eden 영역에 위치
  - Eden 영역에서 GC가 한 번 발생한 후 살아남은 객체는 Survivor 영역 중 하나로 이동된다.
  - Eden 영역에서 GC가 발생하면 이미 살아남은 객체가 존재하는 Survivor 영역으로 객체가 계속 쌓인다.
  - 하나의 Survivor 영역이 가득 차게 되면 그 중에서 살아남은 객체를 다른 Survivor 영역으로 이동한다. 그리고 가득 찬 Survivor 영역은 아무 데이터도 없는 상태로 된다.
  - 이 과정을 반복하다가 계속해서 살아남아 있는 객체는 Old 영역으로 이동하게 된다.
- Survivor 영역 중 하나는 반드시 비어 있는 상태로 남아 있어야 한다.
  - 두 Survivor 영역에 모두 데이터가 존재하거나, 두 영역 모두 사용량이 0이라면 여러분의 시스템은 정상적인 상황이 아니라고 생각하면 된다.
